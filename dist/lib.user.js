// ==UserScript==
// @name          koolside
// @namespace     https://github.com/toriato/koolside
// @version       0.1.0
// @author        Sangha Lee <totoriato@gmail.com>
// @description   디시인사이드 도우미
// @include       https://*.dcinside.com/*
// @require       https://cdnjs.cloudflare.com/ajax/libs/less.js/3.10.3/less.min.js
// @grant         GM_getValue
// @grant         GM_setValue
// @grant         GM_xmlhttpRequest
// @run-at        document-start
// ==/UserScript==

/**/!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(13));t.createElement=function(e){const t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild},t.getParameter=function(e){return o.default.parse(location.search)[e]},t.BODY_PATTERN=/(?<body><body[^>]*>((.|[\n\r])*)<\/body>)/im},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(10));t.details={hide:{name:"숨길 요소",items:{logo:{name:"웹 사이트 로고",default:!1},title:{name:"갤러리 제목",default:!1},titlebar:{name:"갤러리 정보",default:!1},right:{name:"우측 사이드 바",items:{all:{name:"전체",default:!1},login:{name:"사용자 정보",default:!1},recommend:{name:"개념글",default:!1},issuezoom:{name:"이슈 줌",default:!1},news:{name:"뉴스",default:!1},realtime:{name:"실시간 검색어",default:!1},hit:{name:"힛",default:!1},sec_recommend:{name:"초개념",default:!1},wiki:{name:"디시위키",default:!1}}}}},style:{name:"사용자 스타일",items:{font_family_sans:{name:"산세리프 글꼴",default:'"맑은 고딕", sans-serif'},font_family_serif:{name:"세리프 글꼴",default:"serif"},font_family_monospace:{name:"고정폭 글꼴",default:'"D2Coding", NanumGothicCoding, monospace'},font_size_preview:{name:"프리뷰 글자 크기",default:"1.5em"}}},debug:{name:"디버깅",items:{less:{name:"Less",default:!0}}}};const i=function e(t,n){const r={};for(let o in t){const i=t[o];r[o]=i.items?e(i.items,n):i.default}return r}(t.details),s=new o.default("config",{defaultValue:i,onSync(){const e=[];this.get("hide.logo")&&e.push("ks-hide-logo"),this.get("hide.title")&&e.push("ks-hide-title"),this.get("hide.titlebar")&&e.push("ks-hide-titlebar"),this.get("hide.right.all")?e.push("ks-hide-right"):(this.get("hide.right.login")&&e.push("ks-hide-right-login"),this.get("hide.right.recommend")&&e.push("ks-hide-right-recommend"),this.get("hide.right.issuezoom")&&e.push("ks-hide-right-issuezoom"),this.get("hide.right.news")&&e.push("ks-hide-right-news"),this.get("hide.right.realtime")&&e.push("ks-hide-right-realtime"),this.get("hide.right.hit")&&e.push("ks-hide-right-hit"),this.get("hide.right.sec_recommend")&&e.push("ks-hide-right-sec-recommend"),this.get("hide.right.wiki")&&e.push("ks-hide-right-wiki")),document.body.setAttribute("class",e.join(" "))}});t.default=s},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(17)),i=r(n(1)),s=n(0),a={create(){const e=s.createElement('<style id="ks-style" type="text/less"></style>');e.innerHTML=o.default("\n  @font-sans: {font_family_sans};\n  @font-serif: {font_family_serif};\n  @font-monospace: {font_family_monospace};\n\n  @color-primary: #4A56A8;\n  @color-primary-dark: #23284f;\n  @color-primary-darker: #171a33;\n\n  .ks-clearfix {\n    &:after {\n      display: table;\n      clear: both;\n      content: '';\n    }\n  }\n\n  html, body {\n    width: 100%;\n    height: 100%;\n  }\n\n  body,\n  .gall_list,\n  button, input, select, table, textarea {\n    font-family: @font-sans;\n  }\n\n  body {\n    &.ks-hide-logo .dc_logo {\n      visibility: hidden;\n    }\n    &.ks-hide-title {\n      .wrap_inner header,\n      .left_content header {\n        display: none;\n      }\n    }\n    &.ks-hide-titlebar .left_content article:nth-child(2) {\n      display: none;\n    }\n\n    &.ks-hide-right {\n      .left_content {\n        float: none;\n        width: 100%;\n      }\n\n      .issuebox {\n        width: 100%;\n      }\n      .minor_intro_box {\n        width: calc(100% - 155px);\n      }\n      .visit_history {\n        width: 100%;\n        box-sizing: border-box;\n      }\n      .list_array_option {\n        width: 100%;\n      }\n      .right_content {\n        display: none;\n      }\n    }\n\n    &.ks-hide-right .stickyunit {\n      display: none;\n    }\n    &.ks-hide-right-login .login_box {\n      display: none;\n    }\n    &.ks-hide-right-recommend .r_recommend {\n      display: none;\n    }\n    &.ks-hide-right-issuezoom .r_issuezoom {\n      display: none;\n    }\n    &.ks-hide-right-news .r_news {\n      display: none; \n    }\n    &.ks-hide-right-realtime .r_realtime_issue {\n      display: none;\n    }\n    &.ks-hide-right-hit .r_hit { \n      display: none; \n    }\n    &.ks-hide-right-sec-recommend .r_sec_recommend { \n      display: none; \n    }\n    &.ks-hide-right-wiki .r_wiki { \n      display: none; \n    }\n  \n    &.ks-prevent-scrolling {\n      overflow: hidden;\n      height: 100%;\n    }\n  }\n\n  #ks-nav {\n    margin: 0 auto;\n    width: 100%;\n    max-width: 1100px;\n    list-style-type: none;\n    color: white;\n  \n    .ks-nav-item {\n      padding: 1em 2em;\n      cursor: pointer;\n    }\n  }\n\n  #ks-config {\n    transition: opacity .25s;\n    z-index: 500;\n    position: fixed;\n    top: 0;\n    left: 0;\n    display: flex;\n    visibility: hidden;\n    width: 100%;\n    height: 100%;\n    align-items: center;\n    justify-content: center;\n    background: rgba(0, 0, 0, 0.5);\n    opacity: 0;\n    cursor: pointer;\n\n    > div {\n      overflow: hidden;\n      overflow-y: auto;\n      width: 100%;\n      min-width: 400px;\n      max-width: 600px;\n      height: 100%;\n      min-height: 300px;\n      max-height: 80%;\n      border-radius: 5px;\n      background: @color-primary-dark;\n      box-shadow: 0 0 100% black;\n      color: white;\n      cursor: initial;\n    }\n\n    .ks-config-item {\n      box-sizing: border-box;\n      padding: 0.5em 1em;\n      \n      &:nth-child(even) {\n        background: rgba(0, 0, 0, .15);\n      }\n    }\n\n    .ks-config-key {\n      display: block;\n      width: 100%;\n\n      label {\n        float: left;\n        display: inline-block;\n        cursor: pointer;\n      }\n\n      > input {\n        float: right;\n        display: inline-block;\n        border: 1px solid rgba(0, 0, 0, .15);\n        background: @color-primary-dark;\n        font-family: @font-monospace;\n        color: white;\n      }\n\n      .ks-clearfix();\n    }\n    \n    &.ks-active {\n      visibility: visible;\n      opacity: 1;\n    }\n  }\n\n  #ks-preview {\n    transition: opacity .25s;\n    z-index: 1000;\n    position: absolute;\n    top: 0;\n    left: 0;\n    overflow: hidden;\n    overflow-y: auto;\n    transition: opacity .25s;\n    visibility: hidden;\n    padding: 1em;\n    max-width: 500px;\n    max-height: 250px;\n    opacity: 0;\n    background: black;\n    box-shadow: 0 0 5px black;\n    border-radius: 5px;\n    font-size: {font_size_preview};\n    line-height: {font_size_preview};\n    color: white;\n\n    img {\n      max-width: 100%;\n      max-height: 200px;\n      cursor: pointer;\n\n      &.ks-active {\n        max-height: 100%;\n      }\n    }\n\n    &.ks-active {\n      visibility: visible;\n      opacity: .85;\n    }\n  }\n\n  .us-post {\n    &.ks-new {\n      animation-name: ks-new;\n      animation-duration: .5s;\n    }\n\n    &.ks-deleted {\n      background: rgb(240, 100, 100)\n    }\n  }\n\n  @keyframes ks-new {\n    from {\n      transform: scaleY(0);\n      max-height: 0;\n      background: rgba(240, 100, 100, 1);\n    }\n    to {\n      transform: scaleY(1);\n      max-height: 100%;\n      background: rgba(240, 100, 100, 0);\n    }\n  }\n",i.default.get("style")),document.head.append(e),i.default.get("debug.less")&&(less.options.env="development"),less.refresh()},destroy(){var e;null===(e=document.querySelector("#ks-style"))||void 0===e||e.remove()}};t.default=a},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(4)),i=n(0);class s extends Map{async fetchPost(e,t){const n=`https://m.dcinside.com/board/${e}/${t}`,r=(await o.default({url:n,headers:{"user-agent":"Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/34.0.1847.114 Mobile Safari/537.36"}})).responseText.match(i.BODY_PATTERN),s=i.createElement(r.groups.body).parentNode.querySelector(".thum-txtin");for(let e of s.querySelectorAll("*:not(img):not(iframe):not(br):empty"))e.remove();for(let e of s.querySelectorAll("img")){const t=e.dataset.original||e.src;for(;e.attributes.length;)e.removeAttribute(e.attributes[0].name);e.src=t}return this.set(t,s),s}fetchPosts(e,t){return t.map(t=>this.fetchPost(e,t))}}const a=new s;t.default=a},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(3)),i=n(0);function s(e){return new Promise((t,n)=>{e.method=e.method||"GET";const r={...e,onload:n=>{e.onload&&e.onload(n),4===n.readyState&&t(n)},onerror:t=>{e.onerror&&e.onerror(t);const r=new Error("placeholder request error");n(r)}};GM_xmlhttpRequest(r)})}t.default=s,t.fetchList=async function(e){const t=(await s({url:location.href})).responseText.match(i.BODY_PATTERN),n=i.createElement(t.groups.body).parentNode.querySelectorAll(".us-post"),r=document.querySelector(".gall_list tbody"),a=[];for(let t of n){switch(!0){case"icon_notice"===t.dataset.type:continue}const n=parseInt(t.dataset.no,10),i=document.querySelector(`.us-post[data-no="${t.dataset.no}"]`);i&&(i.innerHTML=t.innerHTML),o.default.has(n)||(o.default.fetchPost(e,n),t.classList.add("ks-new"),r.prepend(t)),a.push(n)}const l=Math.min(...a);for(let e of document.querySelectorAll(".us-post")){const t=parseInt(e.dataset.no,10);if(t<l)break;a.includes(t)||e.classList.add("ks-deleted")}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(6)),i=n(8),s=r(n(9)),a=r(n(18)),l=r(n(19)),c=r(n(2)),u=r(n(3)),d=r(n(1)),f=n(4),h=n(0).getParameter("id");window.top===window.self&&i.tryAndWaitForTheElement(".copyright").catch(()=>console.error("페이지에서 게시글 테이블 요소를 불러올 수 없습니다")).then(()=>(async function(){d.default.sync(),c.default.create(),s.default.create(),a.default.create(),l.default.create();const e=document.querySelector("#ks-preview");document.body.prepend(e),document.addEventListener("mousemove",(function(t){let n=t.target;for(;null!==n;){if(n===e){document.body.classList.add("ks-prevent-scrolling");break}if(document.body.classList.remove("ks-prevent-scrolling"),n.classList&&n.classList.contains("us-post"))break;n=n.parentNode}if(n){const r=parseInt(n.dataset.no,10);if(u.default.has(r)&&e.dataset.no!==n.dataset.no){const o=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,i=document.body.clientTop||document.documentElement.clientTop||0,s=n.getBoundingClientRect().top+o-i;e.style.top=`${s}px`,e.style.left=`${t.pageX+25}px`,e.dataset.no=n.dataset.no,e.innerHTML=u.default.get(r).innerHTML,e.classList.add("ks-active");for(let t of e.querySelectorAll("img"))t.addEventListener("click",(function(){this.classList.toggle("ks-active")}))}}else e.classList.remove("ks-active"),e.innerHTML="",delete e.dataset.no}));const t=[],n=o.default(10);for(let e of document.querySelectorAll(".us-post")){if(!e.dataset.no){console.log(e);continue}if("icon_notice"===e.dataset.type)continue;const r=parseInt(e.dataset.no,10);try{const e=n(()=>u.default.fetchPost(h,r));t.push(e)}catch(e){console.error(e)}}await Promise.all(t),setInterval(()=>f.fetchList(h),1e3)})()).catch(console.error)},function(e,t,n){"use strict";const r=n(7),o=e=>{if(!Number.isInteger(e)&&e!==1/0||!(e>0))return Promise.reject(new TypeError("Expected `concurrency` to be a number from 1 and up"));const t=[];let n=0;const o=()=>{n--,t.length>0&&t.shift()()},i=(e,t,...i)=>{n++;const s=r(e,...i);t(s),s.then(o,o)},s=(r,...o)=>new Promise(s=>((r,o,...s)=>{n<e?i(r,o,...s):t.push(i.bind(null,r,o,...s))})(r,s,...o));return Object.defineProperties(s,{activeCount:{get:()=>n},pendingCount:{get:()=>t.length}}),s};e.exports=o,e.exports.default=o},function(e,t,n){"use strict";const r=(e,...t)=>new Promise(n=>{n(e(...t))});e.exports=r,e.exports.default=r},function(e,t,n){!function(e){"use strict";function t(e,t){var n=e.type,r=e.target,o=e.addedNodes;if("attributes"===n&&r.matches(t))return r;if("childList"!==n)return null;for(var i=0,s=o;i<s.length;i+=1){var a=s[i];if("function"==typeof a.matches&&a.matches(t))return a}return r.querySelector(t)}function n(e,n){void 0===n&&(n={});var r=n.timeout;void 0===r&&(r=2500);var o=n.scope;return void 0===o&&(o=document),new Promise((function(n,i){var s=o.querySelector(e),a=null;if(null===s){var l=new MutationObserver((function(r){for(var o=0,i=r;o<i.length;o+=1){var s=t(i[o],e);if(null!==s){clearTimeout(a),l.disconnect(),n(s);break}}}));l.observe(o,{attributes:!0,subtree:!0,childList:!0}),a=setTimeout((function(){l.disconnect(),i(new Error("No element matches the selector "+e+"."))}),r)}else n(s)}))}var r={waitForTheElement:n,tryAndWaitForTheElement:function(e,t){return n(e,t).catch((function(){return null}))}},o=r.waitForTheElement,i=r.tryAndWaitForTheElement;e.default=r,e.tryAndWaitForTheElement=i,e.waitForTheElement=o,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(1)),s=n(0),a=o(n(2));const l={create(){var e;const t=s.createElement(`\n      <div id="ks-config">\n        <div>\n          <h1>설정</h1>\n          ${function e(t,n){const r=[];n=n||"";for(let o in t){const s=t[o];if(s.items){const t=2+(n.match(/\./g)||[]).length;r.push(`<h${t} class="ks-config-item">${s.name}</h${t}>`),r.push(...e(s.items,`${n}${o}.`))}else{const e=`${n}${o}`;let t="";switch(typeof s.default){case"string":t=`\n            <label>${s.name}</label>\n            <input \n              type="text"\n              value="${i.default.get(e).replace(/"/g,"&quot;")}"\n              data-key="${e}">\n          `;break;case"boolean":t=`\n            <label>\n              <input\n                type="checkbox" \n                data-key="${e}"\n                ${i.default.get(e)?"checked":""}>\n              <span>${s.name}</span>\n            </label>\n          `}r.push(`\n        <div class="ks-config-item ks-config-key">\n          ${t}\n        </div>\n      `)}}return r}(i.details).join("\n")}\n        </div>\n      </div>\n    `);function n(){const e=this.dataset.key;let t;switch(typeof i.default.get(e)){case"boolean":t=this.checked;break;default:t=this.value}i.default.set(e,t),i.default.sync(),e.startsWith("style")&&(a.default.destroy(),a.default.create())}document.body.prepend(t),null===(e=document.querySelector("#ks-config"))||void 0===e||e.addEventListener("click",e=>{var t;const n=e.target;"ks-config"===n.id&&(null===(t=n.classList)||void 0===t||t.toggle("ks-active"))});for(let e of document.querySelectorAll(".ks-config-key input"))e.addEventListener("change",n)},destroy(){var e;null===(e=document.querySelector("#ks-preview"))||void 0===e||e.remove()}};t.default=l},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(11));t.default=class{constructor(e,t){this.key=e,this.opts=t||{},this.storage=GM_getValue(e,t.defaultValue)}sync(){GM_setValue(this.key,this.storage),this.opts.onSync&&this.opts.onSync.apply(this)}get(e){return o.default.get(this.storage,e)||o.default.get(this.opts.defaultValue,e)}set(e,t){o.default.set(this.storage,e,t),this.sync()}export(){return this.storage}import(e){this.storage=e,this.sync()}}},function(e,t,n){"use strict";const r=n(12),o=["__proto__","prototype","constructor"],i=e=>!e.some(e=>o.includes(e));function s(e){const t=e.split("."),n=[];for(let e=0;e<t.length;e++){let r=t[e];for(;"\\"===r[r.length-1]&&void 0!==t[e+1];)r=r.slice(0,-1)+".",r+=t[++e];n.push(r)}return i(n)?n:[]}e.exports={get(e,t,n){if(!r(e)||"string"!=typeof t)return void 0===n?e:n;const o=s(t);if(0!==o.length){for(let t=0;t<o.length;t++){if(!Object.prototype.propertyIsEnumerable.call(e,o[t]))return n;if(null==(e=e[o[t]])){if(t!==o.length-1)return n;break}}return e}},set(e,t,n){if(!r(e)||"string"!=typeof t)return e;const o=e,i=s(t);for(let t=0;t<i.length;t++){const o=i[t];r(e[o])||(e[o]={}),t===i.length-1&&(e[o]=n),e=e[o]}return o},delete(e,t){if(!r(e)||"string"!=typeof t)return;const n=s(t);for(let t=0;t<n.length;t++){const o=n[t];if(t===n.length-1)return void delete e[o];if(e=e[o],!r(e))return}},has(e,t){if(!r(e)||"string"!=typeof t)return!1;const n=s(t);if(0===n.length)return!1;for(let t=0;t<n.length;t++){if(!r(e))return!1;if(!(n[t]in e))return!1;e=e[n[t]]}return!0}}},function(e,t,n){"use strict";e.exports=e=>{const t=typeof e;return null!==e&&("object"===t||"function"===t)}},function(e,t,n){"use strict";const r=n(14),o=n(15),i=n(16);function s(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function a(e,t){return t.decode?o(e):e}function l(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function c(e){const t=(e=l(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function u(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function d(e,t){const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":return(e,t,n)=>{const r="string"==typeof t&&t.split("").indexOf(",")>-1?t.split(","):t;n[e]=r};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",parseNumbers:!1,parseBooleans:!1},t)),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;for(const o of e.split("&")){let[e,s]=i(t.decode?o.replace(/\+/g," "):o,"=");s=void 0===s?null:a(s,t),n(a(e,t),s,r)}for(const e of Object.keys(r)){const n=r[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=u(n[e],t);else r[e]=u(n,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce((e,t)=>{const n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(n):e[t]=n,e},Object.create(null))}t.extract=c,t.parse=d,t.stringify=(e,t)=>{if(!e)return"";const n=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const o=n.length;return void 0===r||e.skipNull&&null===r?n:null===r?[...n,[s(t,e),"[",o,"]"].join("")]:[...n,[s(t,e),"[",s(o,e),"]=",s(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r?n:null===r?[...n,[s(t,e),"[]"].join("")]:[...n,[s(t,e),"[]=",s(r,e)].join("")];case"comma":return t=>(n,r)=>null==r||0===r.length?n:0===n.length?[[s(t,e),"=",s(r,e)].join("")]:[[n,s(r,e)].join(",")];default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r?n:null===r?[...n,s(t,e)]:[...n,[s(t,e),"=",s(r,e)].join("")]}}(t=Object.assign({encode:!0,strict:!0,arrayFormat:"none"},t)),r=Object.assign({},e);if(t.skipNull)for(const e of Object.keys(r))void 0!==r[e]&&null!==r[e]||delete r[e];const o=Object.keys(r);return!1!==t.sort&&o.sort(t.sort),o.map(r=>{const o=e[r];return void 0===o?"":null===o?s(r,t):Array.isArray(o)?o.reduce(n(r),[]).join("&"):s(r,t)+"="+s(o,t)}).filter(e=>e.length>0).join("&")},t.parseUrl=(e,t)=>({url:l(e).split("?")[0]||"",query:d(c(e),t)})},function(e,t,n){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)},function(e,t,n){"use strict";var r=new RegExp("%[a-f0-9]{2}","gi"),o=new RegExp("(%[a-f0-9]{2})+","gi");function i(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],i(n),i(r))}function s(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(r),n=1;n<t.length;n++)t=(e=i(t,n).join("")).match(r);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=o.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=s(n[0]);r!==n[0]&&(t[n[0]]=r)}n=o.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),a=0;a<i.length;a++){var l=i[a];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},function(e,t,n){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},function(e,t,n){(function(t){"use strict";function n(e){var t=new Error(e);return t.name="ValueError",t}function r(e){return function(t){var r=Array.prototype.slice.call(arguments,1),o=0,i="UNDEFINED";return t.replace(/([{}])\1|[{](.*?)(?:!(.+?))?[}]/g,(function(t,s,a,l){if(null!=s)return s;var c=a;if(c.length>0){if("IMPLICIT"===i)throw n("cannot switch from implicit to explicit numbering");i="EXPLICIT"}else{if("EXPLICIT"===i)throw n("cannot switch from explicit to implicit numbering");i="IMPLICIT",c=String(o),o+=1}var u=c.split("."),d=(/^\d+$/.test(u[0])?u:["0"].concat(u)).reduce((function(e,t){return e.reduce((function(e,n){return null!=n&&t in Object(n)?["function"==typeof n[t]?n[t]():n[t]]:[]}),[])}),[r]).reduce((function(e,t){return t}),"");if(null==l)return d;if(Object.prototype.hasOwnProperty.call(e,l))return e[l](d);throw n('no transformer named "'+l+'"')}))}}var o=r({});o.create=r,o.extend=function(e,n){var o=r(n);e.format=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(this),o.apply(t,e)}},e.exports=o}).call(this,this)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o={create(){const e=r.createElement('\n      <ul id="ks-nav">\n        <li class="ks-nav-item ks-nav-item-setting">설정</li>\n      </ul>\n    '),t=document.querySelector(".gnb_bar");t&&(t.innerHTML="",t.append(e),document.querySelector(".ks-nav-item-setting").addEventListener("click",()=>{document.querySelector("#ks-config").classList.toggle("ks-active")}))},destroy(){var e;null===(e=document.querySelector("#ks-nav"))||void 0===e||e.remove()}};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o={create(){const e=r.createElement('<div id="ks-preview"></div>');document.body.prepend(e)},destroy(){var e;null===(e=document.querySelector("#ks-preview"))||void 0===e||e.remove()}};t.default=o}]);